pipeline {
   agent any
     stages {
              stage ("build")
                  { steps
                     {  echo "Building the application..."
                        app = docker.build("manishaverma/deployk8")
                     }
                  }

               stage ("test")
                  { steps 
                    {  echo "Building the application..."
                    }
                  }
               
               stage ("Push image") 
                  {  steps
                     {docker.withRegistry('https://registry.hub.docker.com', 'docker')
                       {
                        app.push("${env.BUILD_NUMBER}")
                       } 
                     }
                  }
        
               stage ("deploy") 
                   { steps 
                     {  echo "Building the application..."
                     }
                   }
              }  
         }            

